/// üì∞ Cole√ß√£o de feeds de usu√°rios (fanout pattern)
/// Path usado no app:
/// - feeds/{userId}/items/{itemId}
///   - sourceType: string ('event_photo' | 'activity_feed')
///   - sourceId: string (ID do documento original)
///   - authorId: string (quem criou o conte√∫do)
///   - createdAt: timestamp
///   - eventId: string
///   - preview: map (dados m√≠nimos para exibi√ß√£o)
///
/// Esta cole√ß√£o √© gerenciada pela Cloud Function feedFanout.
/// Quando um usu√°rio cria um EventPhoto ou ActivityFeed item,
/// o item √© distribu√≠do (fanout) para os feeds de todos os seguidores.

match /feeds/{userId} {
  /// üìñ LEITURA do documento raiz:
  /// - Apenas o pr√≥prio usu√°rio pode ler seu feed
  allow read: if isOwner(userId);

  /// ‚úçÔ∏è ESCRITA do documento raiz:
  /// - Bloqueada para o client (somente Admin SDK/Cloud Functions)
  allow write: if false;

  /// üì∞ Subcole√ß√£o de items do feed
  match /items/{itemId} {
    /// üìñ LEITURA:
    /// - Apenas o pr√≥prio usu√°rio pode ler seus items de feed
    allow read: if isOwner(userId);

    /// ‚úçÔ∏è ESCRITA:
    /// - Bloqueada para o client (somente Admin SDK/Cloud Functions)
    /// - Items s√£o criados/deletados pelo feedFanout trigger
    allow write: if false;
  }
}
